import React, {useEffect, useState} from 'react';
import clientFacade from "../api/ClientFacade";
import {Statistic} from "../api/analytic-service-client";

const AnalyticPage = () => {

  const [statistic, setStatistic] = useState<Statistic[]>([])

  useEffect(() => {
    clientFacade.analyticServiceClient.analytic.getStatistic()
      .then((response) => {
        setStatistic(response.stats)
      })
  }, []);

  return (
    <div className="column box m-6 p-6">
      <div className="is-size-3 has-text-centered"><b>Отчет по сканерам уязвимостей</b></div>
      <table className="mt-5 table is-bordered is-fullwidth">
        <thead>
        <tr>
          <th style={{wordBreak: "break-word"}}>Версия сканера</th>
          <th style={{wordBreak: "break-word"}}>Кол-во INFO</th>
          <th style={{wordBreak: "break-word"}}>Кол-во LOW</th>
          <th style={{wordBreak: "break-word"}}>Кол-во MEDIUM</th>
          <th style={{wordBreak: "break-word"}}>Кол-во HIGH</th>
          <th style={{wordBreak: "break-word"}}>Кол-во CRITICAL</th>
          <th style={{wordBreak: "break-word"}}>Очки INFO</th>
          <th style={{wordBreak: "break-word"}}>Очки LOW</th>
          <th style={{wordBreak: "break-word"}}>Очки MEDIUM</th>
          <th style={{wordBreak: "break-word"}}>Очки HIGH</th>
          <th style={{wordBreak: "break-word"}}>Очки CRITICAL</th>
          <th style={{wordBreak: "break-word"}}>Суммарное количество очков</th>
          <th style={{wordBreak: "break-word"}}>Кол-во False-positive</th>
          <th style={{wordBreak: "break-word"}}>Кол-во True-positive</th>
        </tr>
        </thead>
        <tbody>
        {statistic.map((r) => (
          <tr>
            <td>{r.scanner_version_name}</td>
            <td>{r.info_count}</td>
            <td>{r.low_count}</td>
            <td>{r.medium_count}</td>
            <td>{r.high_count}</td>
            <td>{r.critical_count}</td>
            <td>{r.info_points}</td>
            <td>{r.low_points}</td>
            <td>{r.medium_points}</td>
            <td>{r.high_points}</td>
            <td>{r.critical_points}</td>
            <td>{r.total_points}</td>
            <td>{r.false_positive_count}</td>
            <td>{r.true_positive_count}</td>
          </tr>
        ))}
        </tbody>
      </table>
    </div>
  );
};

export default AnalyticPage;