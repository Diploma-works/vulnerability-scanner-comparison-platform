from fastapi import FastAPI
from loguru import logger

from common.clients.catalog_service.CatalogServiceClient import CatalogServiceClient


def create_client(
        app: FastAPI,
        base_url: str,
):
    logger.info("Creating Catalog Service Client")

    app.state.catalog_service = CatalogServiceClient(base_url)

    logger.info("Created Catalog Service Client")


async def stop_client(app: FastAPI):
    logger.info("Stopping Catalog Service Client")

    await app.state.catalog_service.close()

    logger.info("Stopped Catalog Service Client")
